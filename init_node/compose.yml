version: "3.8"

services:
    chordNode:
      build:
         context: ../chordNode/
         dockerfile: Dockerfile
      image: chord_node:v1.0
      networks: 
        - chord
      deploy:
        replicas: "${NODE_REPLICAS}"
        resources:
          limits:
            cpus: '0.5'
            memory: 100m
      entrypoint: ["/bin/bash","-c","tail","-f","/dev/null"]
      tty: true
      volumes: 
          - ChordNodeData:/opt/chordNode

networks: 
    chord: 
        name: chord-net
        external: true

volumes:
    ChordNodeData:
        external: true